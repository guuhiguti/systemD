<!doctype html>
<html lang="pt-br">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Home - Doa+</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet">
  </head>

  <body class="p-4 bg-light">
    <!-- Cabeçalho -->
    <div class="d-flex justify-content-between align-items-center mb-4">
      <h1 class="fw-bold">Doa+</h1>
      <div>
        <span class="me-3">Olá, <strong>{{ usuario.nome }}</strong>!</span>
        <a href="{{ url_for('auth.logout') }}" class="btn btn-outline-danger btn-sm">Sair</a>
      </div>
    </div>

    <!-- COLABORADOR -->
    {% if usuario.tipo == "colaborador" %}
      <h3 class="mb-3">Bem-vindo, Colaborador!</h3>
      <p>Escolha o tipo de item que deseja doar:</p>
      <div class="d-flex flex-wrap gap-3">
        <a href="{{ url_for('admin.lista_recursos', tipo='alimentos') }}" class="btn btn-primary">Alimentos</a>
        <a href="{{ url_for('admin.lista_recursos', tipo='vestuario') }}" class="btn btn-primary">Vestuário</a>
        <a href="{{ url_for('admin.lista_recursos', tipo='higiene') }}" class="btn btn-primary">Higiene e Limpeza</a>
        <a href="{{ url_for('admin.lista_recursos', tipo='servicos') }}" class="btn btn-primary">Serviços</a>
      </div>
    {% endif %}


    <!-- INSTITUIÇÃO -->
    {% if usuario.tipo == "instituicao" %}
      <h3 class="mt-4 mb-3">Painel da Instituição</h3>
      <div class="d-flex flex-wrap gap-3">
        <a href="{{ url_for('admin.lista_recursos', tipo='todos') }}" class="btn btn-success">Ver Contribuições</a>
        <a href="{{ url_for('admin.novo_recurso') }}" class="btn btn-outline-success">Adicionar Novo Recurso</a>
      </div>
    {% endif %}


    <!-- ADMINISTRADOR -->
    {% if usuario.tipo == "administrador" %}
      <h3 class="mt-4 mb-3">Painel de Administrador</h3>
      <div class="d-flex flex-wrap gap-3 mb-3">
        <a href="{{ url_for('admin.gerencia_user') }}" class="btn btn-secondary">Gerenciar Usuários</a>
        <a href="{{ url_for('admin.novo_recurso') }}" class="btn btn-outline-success">Adicionar Novo Recurso</a>
      </div>
      <hr class="mt-4">
    {% endif %}


    <!-- RECURSOS (exibido para admin e instituição) -->
    {% if usuario.tipo == "administrador" or usuario.tipo == "instituicao" %}
      <h4 class="mt-4">Recursos disponíveis</h4>

      {% if recursos and recursos|length > 0 %}
      <table class="table table-striped mt-3">
        <thead class="table-light">
          <tr>
            <th>Tipo</th>
            <th>Item</th>
            <th>Descrição</th>
            <th>Quantidade</th>
            <th>Responsável</th>
            <th>Ações</th>
          </tr>
        </thead>
        <tbody>
          {% for recurso in recursos %}
          <tr>
            <td>{{ recurso.tipo }}</td>
            <td>{{ recurso.item }}</td>
            <td>{{ recurso.descricao }}</td>
            <td>{{ recurso.quantidade }}</td>
            <td>{{ recurso.responsavel }}</td>
            <td>
              <a href="{{ url_for('admin.editar_recurso', recurso_id=recurso.id) }}" class="btn btn-sm btn-warning me-2">Editar</a>
              <a href="{{ url_for('admin.excluir_recurso', recurso_id=recurso.id) }}" class="btn btn-sm btn-danger"
                 onclick="return confirm('Tem certeza que deseja excluir este recurso?')">Excluir</a>
            </td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
      {% else %}
        <p class="text-muted mt-3">Nenhum recurso cadastrado.</p>
      {% endif %}
    {% endif %}

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js"></script>
  </body>
</html>
